<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>AJAX å¼‚æ­¥ vs åŒæ­¥ æ¼”ç¤º</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 800px;
      margin: 50px auto;
      padding: 20px;
    }
    
    .demo-section {
      margin: 30px 0;
      padding: 20px;
      border: 2px solid #ddd;
      border-radius: 8px;
    }
    
    .demo-section h2 {
      margin-top: 0;
      color: #333;
    }
    
    button {
      padding: 10px 20px;
      margin: 10px 10px 10px 0;
      font-size: 16px;
      cursor: pointer;
      border: none;
      border-radius: 5px;
      transition: all 0.3s;
    }
    
    .sync-btn {
      background-color: #ff4444;
      color: white;
    }
    
    .sync-btn:hover {
      background-color: #cc0000;
    }
    
    .async-btn {
      background-color: #44bb44;
      color: white;
    }
    
    .async-btn:hover {
      background-color: #228822;
    }
    
    .test-btn {
      background-color: #4444ff;
      color: white;
    }
    
    .test-btn:hover {
      background-color: #0000cc;
    }
    
    #log {
      background-color: #f5f5f5;
      border: 1px solid #ddd;
      border-radius: 5px;
      padding: 15px;
      margin-top: 20px;
      min-height: 150px;
      max-height: 400px;
      overflow-y: auto;
      font-family: 'Courier New', monospace;
      font-size: 14px;
      line-height: 1.6;
    }
    
    .log-entry {
      margin: 5px 0;
      padding: 3px;
    }
    
    .log-start { color: #0066cc; font-weight: bold; }
    .log-send { color: #666; }
    .log-complete { color: #00aa00; font-weight: bold; }
    .log-blocked { color: #ff0000; font-weight: bold; }
    .log-time { color: #999; font-size: 12px; }
    
    .warning {
      background-color: #fff3cd;
      border: 1px solid #ffc107;
      border-radius: 5px;
      padding: 10px;
      margin: 10px 0;
      color: #856404;
    }
    
    .info {
      background-color: #d1ecf1;
      border: 1px solid #17a2b8;
      border-radius: 5px;
      padding: 10px;
      margin: 10px 0;
      color: #0c5460;
    }
    
    #counter {
      font-size: 24px;
      font-weight: bold;
      color: #333;
      margin: 10px 0;
    }
  </style>
</head>
<body>
  <h1>ğŸ¯ AJAX å¼‚æ­¥ vs åŒæ­¥ æ¼”ç¤º</h1>
  
  <!-- æ¼”ç¤º1ï¼šåŸºæœ¬åŒºåˆ« -->
  <div class="demo-section">
    <h2>æ¼”ç¤º1ï¼šåŒæ­¥ vs å¼‚æ­¥</h2>
    <div class="warning">
      âš ï¸ ç‚¹å‡»"åŒæ­¥è¯·æ±‚"ä¼šè®©é¡µé¢å¡ä½ 3 ç§’ï¼æœŸé—´æ— æ³•æ“ä½œé¡µé¢ã€‚
    </div>
    <button class="sync-btn" onclick="syncDemo()">åŒæ­¥è¯·æ±‚ï¼ˆä¼šå¡æ­»ï¼‰</button>
    <button class="async-btn" onclick="asyncDemo()">å¼‚æ­¥è¯·æ±‚ï¼ˆæ­£å¸¸ï¼‰</button>
    <button class="test-btn" onclick="testInteraction()">ç‚¹å‡»æµ‹è¯•é¡µé¢æ˜¯å¦å“åº”</button>
  </div>
  
  <!-- æ¼”ç¤º2ï¼šå¤šä¸ªè¯·æ±‚å¯¹æ¯” -->
  <div class="demo-section">
    <h2>æ¼”ç¤º2ï¼šå¤šä¸ªè¯·æ±‚çš„æ‰§è¡Œæ—¶é—´</h2>
    <div class="info">
      ğŸ’¡ åŒæ­¥è¯·æ±‚ä¸²è¡Œæ‰§è¡Œï¼ˆ6ç§’ï¼‰ï¼Œå¼‚æ­¥è¯·æ±‚å¹¶å‘æ‰§è¡Œï¼ˆ3ç§’ï¼‰
    </div>
    <button class="sync-btn" onclick="multipleSync()">åŒæ­¥å‘é€3ä¸ªè¯·æ±‚</button>
    <button class="async-btn" onclick="multipleAsync()">å¼‚æ­¥å‘é€3ä¸ªè¯·æ±‚</button>
  </div>
  
  <!-- æ¼”ç¤º3ï¼šè®¡æ•°å™¨æµ‹è¯• -->
  <div class="demo-section">
    <h2>æ¼”ç¤º3ï¼šé¡µé¢å†»ç»“æµ‹è¯•</h2>
    <div class="info">
      ğŸ’¡ åŒæ­¥è¯·æ±‚æ—¶ï¼Œè®¡æ•°å™¨ä¼šåœæ­¢ï¼›å¼‚æ­¥è¯·æ±‚æ—¶ï¼Œè®¡æ•°å™¨ç»§ç»­è¿è¡Œ
    </div>
    <button class="test-btn" onclick="startCounter()">å¯åŠ¨è®¡æ•°å™¨</button>
    <button class="test-btn" onclick="stopCounter()">åœæ­¢è®¡æ•°å™¨</button>
    <div id="counter">0</div>
    <button class="sync-btn" onclick="syncWithCounter()">åŒæ­¥è¯·æ±‚ï¼ˆè®¡æ•°å™¨ä¼šåœï¼‰</button>
    <button class="async-btn" onclick="asyncWithCounter()">å¼‚æ­¥è¯·æ±‚ï¼ˆè®¡æ•°å™¨ç»§ç»­ï¼‰</button>
  </div>
  
  <!-- æ—¥å¿—åŒºåŸŸ -->
  <div class="demo-section">
    <h2>ğŸ“‹ æ‰§è¡Œæ—¥å¿—</h2>
    <button class="test-btn" onclick="clearLog()">æ¸…ç©ºæ—¥å¿—</button>
    <div id="log"></div>
  </div>

  <script>
    let startTime = Date.now();
    let counterInterval = null;
    let counterValue = 0;
    
    // æ—¥å¿—å‡½æ•°
    function log(message, type = 'info') {
      const time = ((Date.now() - startTime) / 1000).toFixed(2);
      const logDiv = document.getElementById('log');
      const entry = document.createElement('div');
      entry.className = `log-entry log-${type}`;
      entry.innerHTML = `<span class="log-time">[${time}s]</span> ${message}`;
      logDiv.appendChild(entry);
      logDiv.scrollTop = logDiv.scrollHeight;
    }
    
    function clearLog() {
      document.getElementById('log').innerHTML = '';
      startTime = Date.now();
    }
    
    // æ¨¡æ‹Ÿå»¶è¿Ÿï¼ˆç”¨äºæ¼”ç¤ºï¼Œå®é™…ä¼šé˜»å¡ï¼‰
    function sleep(ms) {
      const start = Date.now();
      while (Date.now() - start < ms) {
        // ç©ºå¾ªç¯ï¼Œé˜»å¡ä¸»çº¿ç¨‹
      }
    }
    
    // ========== æ¼”ç¤º1ï¼šåŸºæœ¬åŒºåˆ« ==========
    
    // åŒæ­¥è¯·æ±‚ï¼ˆä¼šå¡æ­»é¡µé¢ï¼‰
    function syncDemo() {
      log('ğŸš€ å¼€å§‹åŒæ­¥è¯·æ±‚', 'start');
      log('âš ï¸  æ³¨æ„ï¼šé¡µé¢å³å°†å†»ç»“ 3 ç§’ï¼', 'blocked');
      
      // æ¨¡æ‹ŸåŒæ­¥è¯·æ±‚ï¼ˆå®é™…ä¸­æ˜¯ xhr.open(url, false)ï¼‰
      sleep(3000);
      
      log('âœ… åŒæ­¥è¯·æ±‚å®Œæˆ', 'complete');
      log('ğŸ’¡ æœŸé—´æ— æ³•æ“ä½œé¡µé¢ï¼', 'blocked');
    }
    
    // å¼‚æ­¥è¯·æ±‚ï¼ˆæ­£å¸¸ï¼‰
    function asyncDemo() {
      log('ğŸš€ å¼€å§‹å¼‚æ­¥è¯·æ±‚', 'start');
      log('âœ¨ ç«‹å³ç»§ç»­æ‰§è¡Œï¼Œä¸ç­‰å¾…', 'send');
      
      // æ¨¡æ‹Ÿå¼‚æ­¥è¯·æ±‚
      setTimeout(() => {
        log('âœ… å¼‚æ­¥è¯·æ±‚å®Œæˆï¼ˆ3ç§’åï¼‰', 'complete');
      }, 3000);
      
      log('ğŸ’¡ å¯ä»¥ç»§ç»­æ“ä½œé¡µé¢ï¼', 'send');
    }
    
    // æµ‹è¯•é¡µé¢å“åº”
    function testInteraction() {
      log('ğŸ‘† é¡µé¢å¯ä»¥ç‚¹å‡»ï¼', 'send');
    }
    
    // ========== æ¼”ç¤º2ï¼šå¤šä¸ªè¯·æ±‚å¯¹æ¯” ==========
    
    // åŒæ­¥å‘é€å¤šä¸ªè¯·æ±‚
    function multipleSync() {
      const start = Date.now();
      log('ğŸš€ å¼€å§‹å‘é€ 3 ä¸ªåŒæ­¥è¯·æ±‚', 'start');
      
      log('ğŸ“¡ å‘é€è¯·æ±‚ 1...', 'send');
      sleep(2000);
      log('âœ… è¯·æ±‚ 1 å®Œæˆ', 'complete');
      
      log('ğŸ“¡ å‘é€è¯·æ±‚ 2...', 'send');
      sleep(2000);
      log('âœ… è¯·æ±‚ 2 å®Œæˆ', 'complete');
      
      log('ğŸ“¡ å‘é€è¯·æ±‚ 3...', 'send');
      sleep(2000);
      log('âœ… è¯·æ±‚ 3 å®Œæˆ', 'complete');
      
      const duration = ((Date.now() - start) / 1000).toFixed(2);
      log(`â±ï¸  æ€»è€—æ—¶ï¼š${duration} ç§’ï¼ˆä¸²è¡Œæ‰§è¡Œï¼‰`, 'complete');
    }
    
    // å¼‚æ­¥å‘é€å¤šä¸ªè¯·æ±‚
    function multipleAsync() {
      const start = Date.now();
      log('ğŸš€ å¼€å§‹å‘é€ 3 ä¸ªå¼‚æ­¥è¯·æ±‚', 'start');
      
      let completed = 0;
      
      // è¯·æ±‚ 1
      log('ğŸ“¡ å‘é€è¯·æ±‚ 1...', 'send');
      setTimeout(() => {
        log('âœ… è¯·æ±‚ 1 å®Œæˆ', 'complete');
        completed++;
        if (completed === 3) {
          const duration = ((Date.now() - start) / 1000).toFixed(2);
          log(`â±ï¸  æ€»è€—æ—¶ï¼š${duration} ç§’ï¼ˆå¹¶å‘æ‰§è¡Œï¼‰`, 'complete');
        }
      }, 2000);
      
      // è¯·æ±‚ 2
      log('ğŸ“¡ å‘é€è¯·æ±‚ 2...', 'send');
      setTimeout(() => {
        log('âœ… è¯·æ±‚ 2 å®Œæˆ', 'complete');
        completed++;
        if (completed === 3) {
          const duration = ((Date.now() - start) / 1000).toFixed(2);
          log(`â±ï¸  æ€»è€—æ—¶ï¼š${duration} ç§’ï¼ˆå¹¶å‘æ‰§è¡Œï¼‰`, 'complete');
        }
      }, 2000);
      
      // è¯·æ±‚ 3
      log('ğŸ“¡ å‘é€è¯·æ±‚ 3...', 'send');
      setTimeout(() => {
        log('âœ… è¯·æ±‚ 3 å®Œæˆ', 'complete');
        completed++;
        if (completed === 3) {
          const duration = ((Date.now() - start) / 1000).toFixed(2);
          log(`â±ï¸  æ€»è€—æ—¶ï¼š${duration} ç§’ï¼ˆå¹¶å‘æ‰§è¡Œï¼‰`, 'complete');
        }
      }, 2000);
      
      log('ğŸ’¡ 3 ä¸ªè¯·æ±‚åŒæ—¶å‘é€ï¼Œä¸äº’ç›¸ç­‰å¾…', 'send');
    }
    
    // ========== æ¼”ç¤º3ï¼šè®¡æ•°å™¨æµ‹è¯• ==========
    
    function startCounter() {
      if (counterInterval) return;
      counterValue = 0;
      counterInterval = setInterval(() => {
        counterValue++;
        document.getElementById('counter').textContent = counterValue;
      }, 100);
      log('â±ï¸  è®¡æ•°å™¨å¯åŠ¨', 'start');
    }
    
    function stopCounter() {
      if (counterInterval) {
        clearInterval(counterInterval);
        counterInterval = null;
        log('â¸ï¸  è®¡æ•°å™¨åœæ­¢', 'send');
      }
    }
    
    function syncWithCounter() {
      log('ğŸš€ å¼€å§‹åŒæ­¥è¯·æ±‚ï¼ˆè§‚å¯Ÿè®¡æ•°å™¨ï¼‰', 'start');
      log('âš ï¸  è®¡æ•°å™¨å³å°†åœæ­¢ 3 ç§’ï¼', 'blocked');
      
      sleep(3000);
      
      log('âœ… åŒæ­¥è¯·æ±‚å®Œæˆ', 'complete');
      log('ğŸ’¡ è®¡æ•°å™¨åœ¨è¯·æ±‚æœŸé—´å®Œå…¨åœæ­¢ï¼', 'blocked');
    }
    
    function asyncWithCounter() {
      log('ğŸš€ å¼€å§‹å¼‚æ­¥è¯·æ±‚ï¼ˆè§‚å¯Ÿè®¡æ•°å™¨ï¼‰', 'start');
      log('âœ¨ è®¡æ•°å™¨ç»§ç»­è¿è¡Œ', 'send');
      
      setTimeout(() => {
        log('âœ… å¼‚æ­¥è¯·æ±‚å®Œæˆ', 'complete');
        log('ğŸ’¡ è®¡æ•°å™¨åœ¨è¯·æ±‚æœŸé—´æ­£å¸¸è¿è¡Œï¼', 'complete');
      }, 3000);
    }
    
    // åˆå§‹åŒ–
    log('ğŸ“ é¡µé¢åŠ è½½å®Œæˆï¼Œå¯ä»¥å¼€å§‹æ¼”ç¤º', 'start');
  </script>
</body>
</html>



