# TOPK 算法原理和复杂度分析
## 📖 基础概念

TOPK问题是指在一组数据中找出前K个最大（或最小）的元素，或者找出第K大（或第K小）的元素。这是计算机科学中的经典问题，在面试中经常出现。

## 🎯 问题分类

### 1. 第K大/小元素
- **问题**：找出数组中第K大的元素
- **特点**：只需要一个值，不需要排序
- **应用**：中位数、百分位数

### 2. 前K个最大/最小元素
- **问题**：找出数组中前K个最大的元素
- **特点**：需要K个值，可能需要排序
- **应用**：排行榜、推荐系统

### 3. 前K个高频元素
- **问题**：找出出现频率最高的前K个元素
- **特点**：需要统计频率，然后找前K个
- **应用**：热点分析、用户行为分析

## 🔧 主要解法

### 1. 堆排序法

#### 基本原理
- 维护一个大小为K的堆
- 对于第K大元素：维护最小堆
- 对于第K小元素：维护最大堆

#### 时间复杂度
- **第K大元素**：O(nlogk)
- **前K个元素**：O(nlogk)
- **前K个高频元素**：O(nlogk)

#### 空间复杂度
- O(k) - 维护大小为K的堆

#### 优缺点
- ✅ 时间复杂度稳定
- ✅ 适合K较小的情况
- ❌ 需要额外的堆空间
- ❌ 实现相对复杂

### 2. 快速选择法

#### 基本原理
- 基于快速排序的分区思想
- 每次分区后判断目标元素在哪个分区
- 只处理包含目标元素的分区

#### 时间复杂度
- **平均情况**：O(n)
- **最坏情况**：O(n²)
- **期望情况**：O(n)

#### 空间复杂度
- O(1) - 原地操作

#### 优缺点
- ✅ 平均时间复杂度优秀
- ✅ 空间复杂度低
- ❌ 最坏情况性能差
- ❌ 不稳定

### 3. 排序法

#### 基本原理
- 先排序，再取前K个元素
- 可以使用各种排序算法

#### 时间复杂度
- O(nlogn) - 排序的时间复杂度

#### 空间复杂度
- O(1) - 原地排序
- O(n) - 非原地排序

#### 优缺点
- ✅ 实现简单
- ✅ 时间复杂度稳定
- ❌ 时间复杂度较高
- ❌ 需要排序所有元素

### 4. 桶排序法（适用于频率问题）

#### 基本原理
- 统计每个元素的频率
- 使用桶存储不同频率的元素
- 从高频到低频收集结果

#### 时间复杂度
- O(n) - 统计频率 + 桶排序

#### 空间复杂度
- O(n) - 频率映射 + 桶

#### 优缺点
- ✅ 时间复杂度优秀
- ✅ 适合频率分布均匀的情况
- ❌ 空间复杂度较高
- ❌ 不适合频率分布不均匀的情况

## 📊 复杂度对比表

| 算法 | 时间复杂度 | 空间复杂度 | 稳定性 | 适用场景 |
|------|------------|------------|--------|----------|
| 堆排序 | O(nlogk) | O(k) | 稳定 | K较小 |
| 快速选择 | O(n) 平均 | O(1) | 不稳定 | K接近n |
| 排序 | O(nlogn) | O(1) | 稳定 | 多次查询 |
| 桶排序 | O(n) | O(n) | 稳定 | 频率问题 |

## 🎯 选择建议

### 1. 根据K值选择
- **K << n**：使用堆排序
- **K ≈ n**：使用快速选择
- **K = n**：使用排序

### 2. 根据查询次数选择
- **单次查询**：使用快速选择
- **多次查询**：使用排序

### 3. 根据数据特点选择
- **有重复元素**：使用桶排序
- **数据分布均匀**：使用快速选择
- **数据分布不均匀**：使用堆排序

## 🚀 面试要点

### 1. 基本概念
- 理解TOPK问题的本质
- 知道不同解法的特点
- 掌握复杂度分析

### 2. 算法实现
- 能够手写堆排序
- 能够实现快速选择
- 理解分区操作

### 3. 优化技巧
- 随机化选择基准元素
- 三路分区处理重复元素
- 堆的维护操作

### 4. 边界处理
- 空数组处理
- K值越界处理
- 重复元素处理

## 📚 相关题目

### 1. 基础题目
- 数组中第K大的元素
- 数组中第K小的元素
- 前K个最大元素
- 前K个最小元素

### 2. 进阶题目
- 前K个高频元素
- 前K个高频单词
- 合并K个有序链表
- 数据流中的第K大元素

### 3. 变形题目
- 二维数组中的第K大元素
- 链表中的第K个节点
- 二叉搜索树中的第K小元素

## 💡 总结

TOPK问题是算法面试中的高频题目，主要考察：

1. **算法基础**：堆、快速排序、分区操作
2. **复杂度分析**：时间复杂度和空间复杂度
3. **实现能力**：手写算法实现
4. **优化思维**：不同场景的最优解法

掌握TOPK算法不仅有助于面试，在实际开发中也有广泛应用，如推荐系统、排行榜、数据分析等场景。
