# åè½¬éƒ¨åˆ†é“¾è¡¨è¯¦è§£

## ğŸ“Œ é¢˜ç›®æè¿°

**LeetCode 92: åè½¬é“¾è¡¨ II**

ç»™ä½ å•é“¾è¡¨çš„å¤´æŒ‡é’ˆ `head` å’Œä¸¤ä¸ªæ•´æ•° `left` å’Œ `right`ï¼Œå…¶ä¸­ `left <= right`ã€‚è¯·ä½ åè½¬ä»ä½ç½® `left` åˆ°ä½ç½® `right` çš„é“¾è¡¨èŠ‚ç‚¹ï¼Œè¿”å›**åè½¬åçš„é“¾è¡¨**ã€‚

**ç¤ºä¾‹**ï¼š
```
è¾“å…¥ï¼šhead = [1,2,3,4,5], left = 2, right = 4
è¾“å‡ºï¼š[1,4,3,2,5]
```

---

## ğŸ¯ æ ¸å¿ƒæ€è·¯

### æ–¹æ³•ä¸€ï¼šå¤´æ’æ³•ï¼ˆæ¨èï¼ï¼‰

**æ ¸å¿ƒæ€æƒ³**ï¼šä¸æ–­å°†åé¢çš„èŠ‚ç‚¹æ’å…¥åˆ°åè½¬åŒºé—´çš„å¼€å¤´

#### å›¾è§£è¿‡ç¨‹

```
åŸé“¾è¡¨ï¼š1 -> 2 -> 3 -> 4 -> 5
åè½¬ä½ç½® 2-4

dummy -> 1 -> 2 -> 3 -> 4 -> 5
        pre  start

æ­¥éª¤1ï¼šæŠŠ 3 æ’åˆ° 2 å‰é¢
dummy -> 1 -> 3 -> 2 -> 4 -> 5
        pre       start

æ­¥éª¤2ï¼šæŠŠ 4 æ’åˆ° 3 å‰é¢
dummy -> 1 -> 4 -> 3 -> 2 -> 5
        pre            start

å®Œæˆï¼
ç»“æœï¼š1 -> 4 -> 3 -> 2 -> 5
```

#### ä»£ç å®ç°

```javascript
var reverseBetween = function(head, left, right) {
  const dummy = new ListNode(0, head);
  
  // 1. æ‰¾åˆ°åè½¬åŒºé—´çš„å‰ä¸€ä¸ªèŠ‚ç‚¹
  let pre = dummy;
  for (let i = 1; i < left; i++) {
    pre = pre.next;
  }
  
  // 2. å¤´æ’æ³•åè½¬
  let start = pre.next;
  
  for (let i = 0; i < right - left; i++) {
    const next = start.next;    // è¦æ’å…¥çš„èŠ‚ç‚¹
    start.next = next.next;     // start è·³è¿‡ next
    next.next = pre.next;       // next æ’åˆ°æœ€å‰é¢
    pre.next = next;            // pre æŒ‡å‘æ–°çš„å¤´èŠ‚ç‚¹
  }
  
  return dummy.next;
};
```

#### å…³é”®ç‚¹

- **å¾ªç¯æ¬¡æ•°**ï¼š`right - left` æ¬¡ï¼ˆä¸æ˜¯ `right - left + 1`ï¼‰
- **start ä¸å˜**ï¼šå§‹ç»ˆæŒ‡å‘åŸæ¥çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆåè½¬åçš„æœ€åä¸€ä¸ªï¼‰
- **pre.next å˜åŒ–**ï¼šæ¯æ¬¡æŒ‡å‘æ–°æ’å…¥çš„èŠ‚ç‚¹

---

### æ–¹æ³•äºŒï¼šå®Œå…¨åè½¬æ³•ï¼ˆæœ€æ˜“ç†è§£ï¼ï¼‰

**æ ¸å¿ƒæ€æƒ³**ï¼šå…ˆæ‰¾åˆ°åŒºé—´ï¼Œåè½¬åŒºé—´å†…çš„é“¾è¡¨ï¼Œå†é‡æ–°è¿æ¥

#### å›¾è§£è¿‡ç¨‹

```
åŸé“¾è¡¨ï¼š1 -> 2 -> 3 -> 4 -> 5
åè½¬ä½ç½® 2-4

æ­¥éª¤1ï¼šæ‰¾åˆ° preï¼ˆä½ç½®1çš„èŠ‚ç‚¹ï¼‰
dummy -> 1 -> 2 -> 3 -> 4 -> 5
        pre  start

æ­¥éª¤2ï¼šåè½¬åŒºé—´ [2,3,4]
        2 <- 3 <- 4    5
start        prev  curr

æ­¥éª¤3ï¼šé‡æ–°è¿æ¥
dummy -> 1 -> 4 -> 3 -> 2 -> 5
        pre  prev       start curr

å®Œæˆï¼
```

#### ä»£ç å®ç°

```javascript
var reverseBetween2 = function(head, left, right) {
  const dummy = new ListNode(0, head);
  
  // 1. æ‰¾åˆ°åè½¬åŒºé—´çš„å‰ä¸€ä¸ªèŠ‚ç‚¹
  let pre = dummy;
  for (let i = 1; i < left; i++) {
    pre = pre.next;
  }
  
  // 2. åè½¬åŒºé—´ï¼ˆæ ‡å‡†é“¾è¡¨åè½¬ï¼‰
  let start = pre.next;
  let prev = null;
  let curr = start;
  
  for (let i = 0; i < right - left + 1; i++) {
    const next = curr.next;
    curr.next = prev;
    prev = curr;
    curr = next;
  }
  
  // 3. é‡æ–°è¿æ¥
  pre.next = prev;    // pre -> åè½¬åçš„å¤´èŠ‚ç‚¹
  start.next = curr;  // åŸå¤´èŠ‚ç‚¹ -> åç»§èŠ‚ç‚¹
  
  return dummy.next;
};
```

#### å…³é”®ç‚¹

- **å¾ªç¯æ¬¡æ•°**ï¼š`right - left + 1` æ¬¡ï¼ˆåè½¬æ‰€æœ‰èŠ‚ç‚¹ï¼‰
- **ä¸‰ä¸ªå…³é”®æŒ‡é’ˆ**ï¼š
  - `prev`ï¼šåè½¬åçš„å¤´èŠ‚ç‚¹
  - `start`ï¼šåŸæ¥çš„å¤´èŠ‚ç‚¹ï¼ˆåè½¬åçš„å°¾èŠ‚ç‚¹ï¼‰
  - `curr`ï¼šåç»§èŠ‚ç‚¹

---

### æ–¹æ³•ä¸‰ï¼šé€’å½’æ³•ï¼ˆè¿›é˜¶ï¼‰

**æ ¸å¿ƒæ€æƒ³**ï¼š
- å¦‚æœ `left = 1`ï¼Œå°±æ˜¯åè½¬å‰ N ä¸ªèŠ‚ç‚¹
- å¦åˆ™é€’å½’å¤„ç†ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä½ç½®éƒ½å‡1

#### ä»£ç å®ç°

```javascript
var reverseBetween3 = function(head, left, right) {
  if (left === 1) {
    return reverseN(head, right);
  }
  head.next = reverseBetween3(head.next, left - 1, right - 1);
  return head;
};

// åè½¬å‰ N ä¸ªèŠ‚ç‚¹
let successor = null;
function reverseN(head, n) {
  if (n === 1) {
    successor = head.next;
    return head;
  }
  const last = reverseN(head.next, n - 1);
  head.next.next = head;
  head.next = successor;
  return last;
}
```

---

## ğŸ“Š ä¸‰ç§æ–¹æ³•å¯¹æ¯”

| æ–¹æ³• | ä¼˜ç‚¹ | ç¼ºç‚¹ | é€‚ç”¨åœºæ™¯ |
|------|------|------|---------|
| **å¤´æ’æ³•** | ä»£ç ç®€æ´ï¼Œä¸€æ¬¡éå† | ç†è§£ç¨éš¾ | é¢è¯•ã€å®é™…å¼€å‘ |
| **å®Œå…¨åè½¬** | æœ€å®¹æ˜“ç†è§£ | ä»£ç ç¨é•¿ | åˆå­¦è€… |
| **é€’å½’** | ä»£ç ä¼˜é›… | ç©ºé—´å¤æ‚åº¦O(n) | ç‚«æŠ€ |

---

## ğŸ”¥ é¢è¯•å¿…èƒŒè¦ç‚¹

### 1. è™šæ‹Ÿå¤´èŠ‚ç‚¹æŠ€å·§

```javascript
const dummy = new ListNode(0, head);
// å¥½å¤„ï¼šç»Ÿä¸€å¤„ç† left = 1 çš„æƒ…å†µ
```

### 2. å¤´æ’æ³•æ ¸å¿ƒä»£ç ï¼ˆ4è¡Œï¼‰

```javascript
const next = start.next;    // 1. ä¿å­˜è¦æ’å…¥çš„èŠ‚ç‚¹
start.next = next.next;     // 2. start è·³è¿‡å®ƒ
next.next = pre.next;       // 3. æ’åˆ°æœ€å‰é¢
pre.next = next;            // 4. pre æŒ‡å‘æ–°å¤´
```

### 3. å¾ªç¯æ¬¡æ•°é™·é˜±

- **å¤´æ’æ³•**ï¼šå¾ªç¯ `right - left` æ¬¡
- **å®Œå…¨åè½¬**ï¼šå¾ªç¯ `right - left + 1` æ¬¡

### 4. è¾¹ç•Œæ¡ä»¶

- `left = 1`ï¼šä»å¤´å¼€å§‹åè½¬
- `left = right`ï¼šåªæœ‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¸ç”¨åè½¬
- ç©ºé“¾è¡¨ï¼šè¿”å› null

---

## ğŸ’¡ æ‰©å±•é¢˜ç›®

1. **åè½¬é“¾è¡¨** (LeetCode 206)
2. **K ä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨** (LeetCode 25)
3. **å›æ–‡é“¾è¡¨** (LeetCode 234)

---

## ğŸ¯ é¢è¯•è¯æœ¯ï¼ˆç›´æ¥èƒŒï¼‰

**é¢è¯•å®˜**ï¼š"å¦‚ä½•åè½¬éƒ¨åˆ†é“¾è¡¨ï¼Ÿ"

**ä½ **ï¼š
```
"æˆ‘ç”¨å¤´æ’æ³•ï¼Œæ ¸å¿ƒæ€è·¯æ˜¯ä¸æ–­å°†åé¢çš„èŠ‚ç‚¹æ’å…¥åˆ°åè½¬åŒºé—´çš„å¼€å¤´ã€‚

æ­¥éª¤ï¼š
1. ç”¨è™šæ‹Ÿå¤´èŠ‚ç‚¹ç®€åŒ–è¾¹ç•Œå¤„ç†
2. æ‰¾åˆ°åè½¬åŒºé—´çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ pre
3. å¾ªç¯ right - left æ¬¡ï¼Œæ¯æ¬¡æŠŠ start åé¢çš„èŠ‚ç‚¹æ’åˆ°æœ€å‰é¢
4. è¿”å› dummy.next

æ—¶é—´å¤æ‚åº¦ O(n)ï¼Œç©ºé—´å¤æ‚åº¦ O(1)ã€‚

è¿™ä¸ªæ–¹æ³•çš„ä¼˜ç‚¹æ˜¯ä»£ç ç®€æ´ï¼Œåªéœ€è¦ä¸€æ¬¡éå†ã€‚"
```

---

## âš¡ å¿«é€Ÿè®°å¿†

**å£è¯€**ï¼š
```
æ‰¾ preï¼Œå®š start
å¾ªç¯æ’ï¼Œä¸æ–­å‰
æ¬¡æ•°è®°ï¼Œleft å‡ right
æœ€åè¿”ï¼Œdummy next
```

**4è¡Œæ ¸å¿ƒ**ï¼š
```javascript
next = start.next
start.next = next.next
next.next = pre.next
pre.next = next
```

è®°ä½è¿™4è¡Œï¼Œåè½¬éƒ¨åˆ†é“¾è¡¨å°±æ‹¿ä¸‹äº†ï¼ğŸš€

